
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../general/">
      
      
        <link rel="next" href="../face-warp/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.20">
    
    
      
        <title>Phase Vocoder - CLEESE, a Python toolbox for randomizing stimuli</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#phasevocoder-engine" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CLEESE, a Python toolbox for randomizing stimuli" class="md-header__button md-logo" aria-label="CLEESE, a Python toolbox for randomizing stimuli" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M184 0c30.9 0 56 25.1 56 56v400c0 30.9-25.1 56-56 56-28.9 0-52.7-21.9-55.7-50.1-5.2 1.4-10.7 2.1-16.3 2.1-35.3 0-64-28.7-64-64 0-7.4 1.3-14.6 3.6-21.2C21.4 367.4 0 338.2 0 304c0-31.9 18.7-59.5 45.8-72.3C37.1 220.8 32 207 32 192c0-30.7 21.6-56.3 50.4-62.6C80.8 123.9 80 118 80 112c0-29.9 20.6-55.1 48.3-62.1 3-28 26.8-49.9 55.7-49.9zm144 0c28.9 0 52.6 21.9 55.7 49.9C411.5 56.9 432 82 432 112c0 6-.8 11.9-2.4 17.4 28.8 6.2 50.4 31.9 50.4 62.6 0 15-5.1 28.8-13.8 39.7 27.1 12.8 45.8 40.4 45.8 72.3 0 34.2-21.4 63.4-51.6 74.8 2.3 6.6 3.6 13.8 3.6 21.2 0 35.3-28.7 64-64 64-5.6 0-11.1-.7-16.3-2.1-3 28.2-26.8 50.1-55.7 50.1-30.9 0-56-25.1-56-56V56c0-30.9 25.1-56 56-56z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CLEESE, a Python toolbox for randomizing stimuli
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Phase Vocoder
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/neuro-team-femto/cleese" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    neuro-team-femto/cleese
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../installation/" class="md-tabs__link">
        
  
    
  
  Getting started

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../general/" class="md-tabs__link">
          
  
  Functions

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/speech/" class="md-tabs__link">
          
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../about/" class="md-tabs__link">
        
  
    
  
  About CLEESE

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CLEESE, a Python toolbox for randomizing stimuli" class="md-nav__button md-logo" aria-label="CLEESE, a Python toolbox for randomizing stimuli" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M184 0c30.9 0 56 25.1 56 56v400c0 30.9-25.1 56-56 56-28.9 0-52.7-21.9-55.7-50.1-5.2 1.4-10.7 2.1-16.3 2.1-35.3 0-64-28.7-64-64 0-7.4 1.3-14.6 3.6-21.2C21.4 367.4 0 338.2 0 304c0-31.9 18.7-59.5 45.8-72.3C37.1 220.8 32 207 32 192c0-30.7 21.6-56.3 50.4-62.6C80.8 123.9 80 118 80 112c0-29.9 20.6-55.1 48.3-62.1 3-28 26.8-49.9 55.7-49.9zm144 0c28.9 0 52.6 21.9 55.7 49.9C411.5 56.9 432 82 432 112c0 6-.8 11.9-2.4 17.4 28.8 6.2 50.4 31.9 50.4 62.6 0 15-5.1 28.8-13.8 39.7 27.1 12.8 45.8 40.4 45.8 72.3 0 34.2-21.4 63.4-51.6 74.8 2.3 6.6 3.6 13.8 3.6 21.2 0 35.3-28.7 64-64 64-5.6 0-11.1-.7-16.3-2.1-3 28.2-26.8 50.1-55.7 50.1-30.9 0-56-25.1-56-56V56c0-30.9 25.1-56 56-56z"/></svg>

    </a>
    CLEESE, a Python toolbox for randomizing stimuli
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/neuro-team-femto/cleese" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    neuro-team-femto/cleese
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Functions
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Functions
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../general/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Phase Vocoder
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Phase Vocoder
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#modes-of-operation" class="md-nav__link">
    <span class="md-ellipsis">
      Modes of operation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modes of operation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#batch-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Batch generation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passing-a-given-bpf" class="md-nav__link">
    <span class="md-ellipsis">
      Passing a given BPF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passing-a-given-time-vector" class="md-nav__link">
    <span class="md-ellipsis">
      Passing a given time vector
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#array-input-and-output" class="md-nav__link">
    <span class="md-ellipsis">
      Array input and output
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration file
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#main-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Main parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Common parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bpfs" class="md-nav__link">
    <span class="md-ellipsis">
      BPFs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BPFs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#temporal-bpfs" class="md-nav__link">
    <span class="md-ellipsis">
      Temporal BPFs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spectro-temporal-bpfs" class="md-nav__link">
    <span class="md-ellipsis">
      Spectro-temporal BPFs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#treatments" class="md-nav__link">
    <span class="md-ellipsis">
      Treatments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Treatments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time-stretching-stretch" class="md-nav__link">
    <span class="md-ellipsis">
      Time stretching (stretch)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pitch-shifting-pitch" class="md-nav__link">
    <span class="md-ellipsis">
      Pitch shifting (pitch)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#time-varying-equalization-eq" class="md-nav__link">
    <span class="md-ellipsis">
      Time-varying equalization (eq)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#time-varying-gain-gain" class="md-nav__link">
    <span class="md-ellipsis">
      Time-varying gain (gain)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../face-warp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Face Warp
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/speech/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Random speech
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/face/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Random faces
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../about/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About CLEESE
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#modes-of-operation" class="md-nav__link">
    <span class="md-ellipsis">
      Modes of operation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Modes of operation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#batch-generation" class="md-nav__link">
    <span class="md-ellipsis">
      Batch generation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passing-a-given-bpf" class="md-nav__link">
    <span class="md-ellipsis">
      Passing a given BPF
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#passing-a-given-time-vector" class="md-nav__link">
    <span class="md-ellipsis">
      Passing a given time vector
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#array-input-and-output" class="md-nav__link">
    <span class="md-ellipsis">
      Array input and output
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-file" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration file
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration file">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#main-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Main parameters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Common parameters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bpfs" class="md-nav__link">
    <span class="md-ellipsis">
      BPFs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BPFs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#temporal-bpfs" class="md-nav__link">
    <span class="md-ellipsis">
      Temporal BPFs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spectro-temporal-bpfs" class="md-nav__link">
    <span class="md-ellipsis">
      Spectro-temporal BPFs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#treatments" class="md-nav__link">
    <span class="md-ellipsis">
      Treatments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Treatments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#time-stretching-stretch" class="md-nav__link">
    <span class="md-ellipsis">
      Time stretching (stretch)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pitch-shifting-pitch" class="md-nav__link">
    <span class="md-ellipsis">
      Pitch shifting (pitch)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#time-varying-equalization-eq" class="md-nav__link">
    <span class="md-ellipsis">
      Time-varying equalization (eq)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#time-varying-gain-gain" class="md-nav__link">
    <span class="md-ellipsis">
      Time-varying gain (gain)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/neuro-team-femto/cleese/edit/main/docs/api/phase-vocoder.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
    </a>
  
  


<h1 id="phasevocoder-engine">PhaseVocoder Engine<a class="headerlink" href="#phasevocoder-engine" title="Permanent link">&para;</a></h1>
<p>CLEESE's <code>PhaseVocoder</code> engine operates by generating a set of random breakpoint functions (BPFs) in the appropriate format for each treatment, which
are then passed to the included spectral processing engine (based on an implementation of the Phase Vocoder algorithm) with the corresponding parameters. Alternatively, the BPFs can be externally created by the user, and so it can also be used as a Phase Vocoder-based effects unit.</p>
<h2 id="modes-of-operation">Modes of operation<a class="headerlink" href="#modes-of-operation" title="Permanent link">&para;</a></h2>
<p>CLEESE can be used in several different modes, depending on how the main processing function is called. Examples of several typical usage scenarios are
included in the example script \texttt{run_cleese.py}.</p>
<h3 id="batch-generation">Batch generation<a class="headerlink" href="#batch-generation" title="Permanent link">&para;</a></h3>
<p>In batch mode, CLEESE's <code>PhaseVocoder</code> engine generates many random modifications from a single input sound file, called the base sound. It can be
launched as follows:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="kn">import</span> <span class="nn">cleese_stim</span> <span class="k">as</span> <span class="nn">cleese</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="kn">from</span> <span class="nn">cleese_stim.engines</span> <span class="kn">import</span> <span class="n">PhaseVocoder</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="n">inputFile</span>  <span class="o">=</span> <span class="s1">&#39;path_to_input_sound.wav&#39;</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="n">configFile</span> <span class="o">=</span> <span class="s1">&#39;path_to_config_file.toml&#39;</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="n">cleese</span><span class="o">.</span><span class="n">generate_stimuli</span><span class="p">(</span><span class="n">PhaseVocoder</span><span class="p">,</span> <span class="n">inputFile</span><span class="p">,</span> <span class="n">configFile</span><span class="p">)</span>
</span></code></pre></div>
<p>Two parameters have to be set by the user:</p>
<ul>
<li>
<p><code>inputFile</code>: the path to the base sound, which has to be a mono sound in WAV format.</p>
</li>
<li>
<p><code>configFile</code>: the path to the configuration file</p>
</li>
</ul>
<p>All the generation parameters for all treatments are set up in the configuration file that has to be edited or created by the user. An example of
configuration file with parameters for all treatments is included with the toolbox: <code>cleese-phase-vocoder.toml</code>. Configuration parameters will be
detailed below.</p>
<p>For each run in batch mode, the toolbox generates the following folder structure, where <code>&lt;outPath&gt;</code>} is specified in the parameter file:</p>
<ul>
<li><code>&lt;outPath&gt;/&lt;currentExperimentFolder&gt;</code>: main folder for the current generation experiment. The name <code>&lt;currentExperimentFolder&gt;</code> iscautomatically created from the current date and time. This folder contains:<ul>
<li><code>&lt;baseSound&gt;.wav</code>: a copy of the base sound used for the current experiment</li>
<li><code>*.toml</code>: a copy of the configuration script used for the current experiment</li>
<li>one subfolder for each one of the performed treatments, which can be either <code>pitch</code>,  <code>stretch</code>, <code>gain</code>, <code>eq</code>, or a combination (chaining) of them. Each of them contains, for each generated stimulus:<ul>
<li><code>&lt;baseSound&gt;.xxxxxxxx.&lt;treatment&gt;.wav</code>: the generated stimulus, where <code>xxxxxxxx</code> is a running number (e.g.: <code>cage.00000001.stretch.wav</code>)</li>
<li><code>&lt;baseSound&gt;.xxxxxxxx.&lt;treatment&gt;BPF.txt</code>: the generated BPF, in ASCII format, for the generated stimulus (e.g.: <code>cage.00000001.stretchBPF.txt</code>)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="passing-a-given-bpf">Passing a given BPF<a class="headerlink" href="#passing-a-given-bpf" title="Permanent link">&para;</a></h3>
<p>When passing the <code>BPF</code> argument to <code>cleese.generate_stimuli</code>, it is possible to impose a given BPF with a certain treatment to an input file. In
this way, the toolbox can be used as a traditional effects unit.</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="kn">import</span> <span class="nn">cleese_stim</span> <span class="k">as</span> <span class="nn">cleese</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="kn">from</span> <span class="nn">cleese_stim.engines</span> <span class="kn">import</span> <span class="n">PhaseVocoder</span>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="n">inputFile</span>  <span class="o">=</span> <span class="s1">&#39;path_to_input_sound.wav&#39;</span>
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="n">configFile</span> <span class="o">=</span> <span class="s1">&#39;path_to_config_file.toml&#39;</span>
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="n">givenBPF</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">0.</span><span class="p">,</span><span class="mf">0.</span><span class="p">],[</span><span class="mf">3.</span><span class="p">,</span><span class="mf">500.</span><span class="p">]])</span>
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="n">cleese</span><span class="o">.</span><span class="n">generate_stimuli</span><span class="p">(</span><span class="n">PhaseVocoder</span><span class="p">,</span> <span class="n">inputFile</span><span class="p">,</span> <span class="n">configFile</span><span class="p">,</span> <span class="n">BPF</span><span class="o">=</span><span class="n">givenBPF</span><span class="p">)</span>
</span></code></pre></div>
<p>The <code>BPF</code> argument can be either:
 - a numpy array containing the BPF
 - a scalar, in which case the treatment performed is static</p>
<p>In this usage scenario, only one file is output, stored at the <code>&lt;outPath&gt;</code> folder, as specified in the configuration file.</p>
<h3 id="passing-a-given-time-vector">Passing a given time vector<a class="headerlink" href="#passing-a-given-time-vector" title="Permanent link">&para;</a></h3>
<p>Instead of passing a full BPF (time+values), it is also possible to just pass a given time vector, containing the time instants (in seconds), at which the
treatments change. The amount of modification will be randomly generated, but they will always happen at the given time tags. This might be useful to perform
random modifications at specific onset locations, previously obtained manually or automatically.</p>
<p>The time vector is passed via the <code>timeVec</code> argument:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="kn">import</span> <span class="nn">cleese_stim</span> <span class="k">as</span> <span class="nn">cleese</span>
</span><span id="__span-2-4"><a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="kn">from</span> <span class="nn">cleese_stim.engines</span> <span class="kn">import</span> <span class="n">PhaseVocoder</span>
</span><span id="__span-2-5"><a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>
</span><span id="__span-2-6"><a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="n">inputFile</span>  <span class="o">=</span> <span class="s1">&#39;path_to_input_sound.wav&#39;</span>
</span><span id="__span-2-7"><a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="n">configFile</span> <span class="o">=</span> <span class="s1">&#39;path_to_config_file.toml&#39;</span>
</span><span id="__span-2-8"><a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>
</span><span id="__span-2-9"><a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="n">givenTimeVec</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.15</span><span class="p">,</span><span class="mf">0.3</span><span class="p">])</span>
</span><span id="__span-2-10"><a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="n">cleese</span><span class="o">.</span><span class="n">generate_stimuli</span><span class="p">(</span><span class="n">PhaseVocoder</span><span class="p">,</span> <span class="n">inputFile</span><span class="p">,</span> <span class="n">configFile</span><span class="p">,</span> <span class="n">timeVec</span><span class="o">=</span><span class="n">givenTimeVec</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="array-input-and-output">Array input and output<a class="headerlink" href="#array-input-and-output" title="Permanent link">&para;</a></h3>
<p>Instead of providing a file name for the input sound, it is possible to pass a Numpy array containing the input waveform. In this case, the main function will provide as output both the modified sound and the generated BPF as Numpy arrays. No files or folder structures are created as output:</p>
<div class="language-py highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="kn">import</span> <span class="nn">cleese_stim</span> <span class="k">as</span> <span class="nn">cleese</span>
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="kn">from</span> <span class="nn">cleese_stim.engines</span> <span class="kn">import</span> <span class="n">PhaseVocoder</span>
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="n">inputFile</span>  <span class="o">=</span> <span class="s1">&#39;path_to_input_sound.wav&#39;</span>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="n">configFile</span> <span class="o">=</span> <span class="s1">&#39;path_to_config_file.toml&#39;</span>
</span><span id="__span-3-6"><a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
</span><span id="__span-3-7"><a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="n">waveIn</span><span class="p">,</span><span class="n">sr</span><span class="p">,</span><span class="n">__</span> <span class="o">=</span> <span class="n">PhaseVocoder</span><span class="o">.</span><span class="n">wavRead</span><span class="p">(</span><span class="n">inputFile</span><span class="p">)</span>
</span><span id="__span-3-8"><a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="n">waveOut</span><span class="p">,</span><span class="n">BPFout</span> <span class="o">=</span> <span class="n">cleese</span><span class="o">.</span><span class="n">process_data</span><span class="p">(</span><span class="n">PhaseVocoder</span><span class="p">,</span>
</span><span id="__span-3-9"><a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>                                     <span class="n">waveIn</span><span class="p">,</span>
</span><span id="__span-3-10"><a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>                                     <span class="n">configFile</span><span class="p">,</span>
</span><span id="__span-3-11"><a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>                                     <span class="n">sample_rate</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</span></code></pre></div>
<p>Note that the sampling rate <code>sample_rate</code> has to be passed as well! Like when passing a BPF, only a single sound is generated.</p>
<h2 id="configuration-file">Configuration file<a class="headerlink" href="#configuration-file" title="Permanent link">&para;</a></h2>
<p>All the generation parameters are set in the configuration file. Please refer to the included configuration script <a href="../configs/cleese-phase-vocoder.toml">cleese-phase-vocoder.toml</a> for an
example.</p>
<h3 id="main-parameters">Main parameters<a class="headerlink" href="#main-parameters" title="Permanent link">&para;</a></h3>
<p>The main parameters are set as follows:</p>
<div class="language-toml highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># apply transformation in series (True) or parallel (False)</span>
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">chain</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="c1"># transformations to apply</span>
</span><span id="__span-4-5"><a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="n">transf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;stretch&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;pitch&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;gain&quot;</span><span class="p">]</span>
</span><span id="__span-4-6"><a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
</span><span id="__span-4-7"><a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="k">[analysis]</span>
</span><span id="__span-4-8"><a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="c1"># analysis window length in seconds</span>
</span><span id="__span-4-9"><a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="c1"># (not to be confused with the BPF processing window lengths)</span>
</span><span id="__span-4-10"><a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="n">window</span><span class="p">.</span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.04</span>
</span><span id="__span-4-11"><a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>
</span><span id="__span-4-12"><a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="c1"># number of hops per analysis window</span>
</span><span id="__span-4-13"><a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="n">oversampling</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">8</span>
</span></code></pre></div>
<p>If <code>chain</code> is set to <code>true</code>, the transformations specified in the <code>transf</code> list will be applied as a chain, in the order implied by the list. For instance, the list <code>['stretch','pitch','eq','gain']</code> will produce the output folders <code>stretch</code>, <code>stretch_pitch</code>, <code>stretch_pitch_eq</code> and <code>stretch_pitch_eq_gain</code>, each one containing an additional step in the process chain.</p>
<p>If <code>chain</code> is set to <code>false</code>, the transformations will be in parallel (i.e. all starting from the original sound file), producing the output folders
<code>stretch</code>, <code>pitch</code>, <code>eq</code> and <code>gain</code>.</p>
<h3 id="common-parameters">Common parameters<a class="headerlink" href="#common-parameters" title="Permanent link">&para;</a></h3>
<p>The following parameters are shared by all treatments, but can take different values for each of them. </p>
<p>In the following, <code>&lt;treatment&gt;</code> has to be replaced by one of the strings in <code>['stretch','pitch','eq','gain']</code>:</p>
<div class="language-toml highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># common treatment parameters</span>
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="k">[</span><span class="err">&lt;</span><span class="k">treatment</span><span class="err">&gt;</span><span class="k">]</span>
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="c1"># BPF window in seconds. If 0 : static transformation</span>
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="n">window</span><span class="p">.</span><span class="n">len</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.11</span>
</span><span id="__span-5-5"><a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>
</span><span id="__span-5-6"><a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="c1"># number of BPF windows. If 0 : static transformation</span>
</span><span id="__span-5-7"><a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="n">window</span><span class="p">.</span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span>
</span><span id="__span-5-8"><a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a>
</span><span id="__span-5-9"><a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="c1"># &#39;s&#39;: force winlength in seconds,&#39;n&#39;: force number of windows (equal length)</span>
</span><span id="__span-5-10"><a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a><span class="n">window</span><span class="p">.</span><span class="n">unit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;n&#39;</span>
</span><span id="__span-5-11"><a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a>
</span><span id="__span-5-12"><a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="c1"># standard deviation (cents) for each BPF point of the random modification</span>
</span><span id="__span-5-13"><a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="n">std</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">300</span>
</span><span id="__span-5-14"><a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a>
</span><span id="__span-5-15"><a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="c1"># truncate distribution values (factor of std)</span>
</span><span id="__span-5-16"><a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="n">trunc</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
</span><span id="__span-5-17"><a id="__codelineno-5-17" name="__codelineno-5-17" href="#__codelineno-5-17"></a>
</span><span id="__span-5-18"><a id="__codelineno-5-18" name="__codelineno-5-18" href="#__codelineno-5-18"></a><span class="c1"># type of breakpoint function:</span>
</span><span id="__span-5-19"><a id="__codelineno-5-19" name="__codelineno-5-19" href="#__codelineno-5-19"></a><span class="c1">#      &#39;ramp&#39;: linear interpolation between breakpoints</span>
</span><span id="__span-5-20"><a id="__codelineno-5-20" name="__codelineno-5-20" href="#__codelineno-5-20"></a><span class="c1">#      &#39;square&#39;: square BPF, with specified transition times at edges</span>
</span><span id="__span-5-21"><a id="__codelineno-5-21" name="__codelineno-5-21" href="#__codelineno-5-21"></a><span class="n">BPFtype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;ramp&#39;</span>
</span><span id="__span-5-22"><a id="__codelineno-5-22" name="__codelineno-5-22" href="#__codelineno-5-22"></a>
</span><span id="__span-5-23"><a id="__codelineno-5-23" name="__codelineno-5-23" href="#__codelineno-5-23"></a><span class="c1"># in seconds: transition time for square BPF</span>
</span><span id="__span-5-24"><a id="__codelineno-5-24" name="__codelineno-5-24" href="#__codelineno-5-24"></a><span class="n">trTime</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0.02</span>
</span></code></pre></div>
<ul>
<li>
<p><code>window.len</code>: Length in seconds of the treatment window (i.e., the window used to generate the timestamps in the BPFs). It should be longer than
        <code>analysis.window.len</code>. This is only used if <code>window.unit = 's'</code> (see below).
    Note: static treatment: if <code>window.length = 0</code>, the treatment is static (i.e. it doesn't change with time - an all-flat BPF).</p>
</li>
<li>
<p><code>window.count</code>: Total number of treatment windows. This is only used if <code>window.unit = 'n'</code> (see below).
    Note: static treatment: if <code>window.count = 0</code>, the treatment is static (flat BPF).</p>
</li>
<li><code>window.unit</code>: Whether to enforce window length in seconds (<code>s</code>) or integer number of windows (<code>n</code>).</li>
<li><code>std</code>: Standard deviation of a Gaussian distribution from which the random values at each timestamp of the BPFs will be sampled. The unit of the std is specific to each treatment: <ul>
<li>for <code>pitch</code>: cents</li>
<li>for <code>eq</code> and <code>gain</code>: amplitude dBs</li>
<li>for <code>stretch</code>: stretching factor (~&gt;1: expansion, &lt;1: compression)</li>
</ul>
</li>
<li><code>trunc</code>: Factor of the std above which distribution samples are not allowed. If a sample is greater than +/- <code>std * trunc</code>, a new random value
        is sampled at that point.</li>
<li><code>BPFtype</code>: Type of BPF. Can be either <code>ramp</code> or <code>square</code></li>
<li><code>trTime</code>: For BPFs of type <code>square</code>, length in seconds of the transition phases.</li>
</ul>
<h2 id="bpfs">BPFs<a class="headerlink" href="#bpfs" title="Permanent link">&para;</a></h2>
<p>In CLEESE, sound transformations can be time-varying: the amount of modification (e.g. the pitch shifting or time stretching factors) can
dynamically change over the duration of the input sound file. The break-point functions (BPFs) determine how these modifications vary over time. For the
<code>pitch</code>, <code>stretch</code> and <code>gain</code> treatments, BPFs are one-dimensional (temporal). For the <code>eq</code> treatment, BPFs are two-dimensional (spectro-temporal).</p>
<p>As has been seen, BPFs can be either randomly generated by CLEESE or provided by the user.</p>
<h3 id="temporal-bpfs">Temporal BPFs<a class="headerlink" href="#temporal-bpfs" title="Permanent link">&para;</a></h3>
<p>For the <code>pitch</code>, <code>stretch</code> and <code>gain</code> treatments, BPFs are temporal: they are two-column matrices with rows of the form:
<div class="language-text highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a>time, value
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>t0, v0
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>t1, v1
</span><span id="__span-6-4"><a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>... 
</span><span id="__span-6-5"><a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>tn, vn
</span></code></pre></div>
where <code>time</code> is in seconds, and <code>value</code> is in the same units than the transform's <code>std</code> parameter (ex. cents for <code>pitch</code>).</p>
<figure>
  <img alt="Image title" src="../../images/ramps_s.png" width="30%" />
  <figcaption>Ramp BPF with window specified in seconds</figcaption>
</figure>
<figure>
  <img alt="Image title" src="../../images/ramps_n.png" width="30%" />
  <figcaption>Ramp BPF with window specified in number</figcaption>
</figure>
<figure>
  <img alt="Image title" src="../../images/square_s.png" width="30%" />
  <figcaption>Square BPF with window specified in seconds</figcaption>
</figure>
<figure>
  <img alt="Image title" src="../../images/square_n.png" width="30%" />
  <figcaption>Square BPF with window specified in number</figcaption>
</figure>
<p>CLEESE can randomly generate one-dimensional BPFs of two types:</p>
<ul>
<li>
<p>Ramps <code>BPFtype = 'ramp'</code>: the BPF is interpreted as a linearly interpolated function. The result is that the corresponding sound parameter is changed gradually (linearly) between timestamps. Examples are shown above for a treatment window defined in seconds (<code>window.unit = 's'</code>), and for a treatment window defined in terms of window number (<code>window.unit = 'n'</code>). Note that in the first case, the length of the last window depends on the length of the input sound. In the second case, all windows have the same length.</p>
</li>
<li>
<p>Square (<code>BPFtype = 'square'</code>): the BPF is a square wave with sharply sloped transitions, whose length is controlled by <code>trTime</code>. Examples are shown above for a treatment window defined in seconds (<code>window.unit = 's'</code>), and for a treatment window defined in terms of window number (<code>window.unit = 'n'</code>).</p>
</li>
</ul>
<h3 id="spectro-temporal-bpfs">Spectro-temporal BPFs<a class="headerlink" href="#spectro-temporal-bpfs" title="Permanent link">&para;</a></h3>
<p>The <code>eq</code> treatment performs time-varying filtering over a number of determined frequency bands. It thus expects a spectro-temporal (two-dimensional) BPF whose rows are defined as follows:</p>
<div class="language-text highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>time numberOfBands freq1 value1 freq2 value2 freq3 value3 
</span><span id="__span-7-2"><a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>t0, m, f1, v1_0, f2, v2_0, ..., fm, vm_0
</span><span id="__span-7-3"><a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>t1, m, f1, v1_1, f2, v2_1, ..., fm, vm_1
</span><span id="__span-7-4"><a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>...
</span><span id="__span-7-5"><a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>tn, m, f1, v1_n, f2, v2_n, ..., fm, vm_n
</span></code></pre></div>
<p>The temporal basis can again be generated as <code>ramp</code> or <code>square</code>. In contrast, in the frequency axis, points are always interpolated linearly.
Thus, a spectro-temporal BPF can be interpreted as a time-varying piecewise-linear spectral envelope.</p>
<h2 id="treatments">Treatments<a class="headerlink" href="#treatments" title="Permanent link">&para;</a></h2>
<h3 id="time-stretching-stretch">Time stretching (<code>stretch</code>)<a class="headerlink" href="#time-stretching-stretch" title="Permanent link">&para;</a></h3>
<p>This treatment stretches or compresses locally the sound file without changing the pitch, according to the current stretching factor (oscillating around 1) at the current timestamp. This is the only treatment that changes the duration of the output compared to the base sound. The used algorithm is a phase vocoder with phase locking based on frame-wise peak picking.</p>
<h3 id="pitch-shifting-pitch">Pitch shifting (<code>pitch</code>)<a class="headerlink" href="#pitch-shifting-pitch" title="Permanent link">&para;</a></h3>
<p>The BPF is used to transpose up and down the pitch of the sound, without changing its duration. The used algorithm is a phase vocoder with phase locking
based on frame-wise peak picking, followed by resampling on a window-by-window basis.</p>
<h3 id="time-varying-equalization-eq">Time-varying equalization (<code>eq</code>)<a class="headerlink" href="#time-varying-equalization-eq" title="Permanent link">&para;</a></h3>
<p>This treatment divides the spectrum into a set of frequency bands, and applies random amplitudes to the bands. The definition of band edges is constant, the
amplitudes can be time-varying. The corresponding BPF is thus two-dimensional</p>
<p>There are two possible ways to define the band division:</p>
<ul>
<li><code>Linear</code> division into a given number of bands between 0 Hz and Nyquist.</li>
<li>Division according to a <code>mel</code> scale into a given number of bands. Note that it it possible to specify any number of filters (less or more than
        the traditional 40 filters for mel cepstra.</li>
</ul>
<p>These settings are defined by the following treatment-specific parameters:</p>
<div class="language-toml highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="k">[eq]</span>
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;mel&#39;</span><span class="w">  </span><span class="c1"># mel, linear</span>
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="n">band</span><span class="p">.</span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>
</span></code></pre></div>
<h3 id="time-varying-gain-gain">Time-varying gain (<code>gain</code>)<a class="headerlink" href="#time-varying-gain-gain" title="Permanent link">&para;</a></h3>
<p>For gain or level randomization, the BPF is interpolated and interpreted as an amplitude modulator. Note that the corresponding standard deviation is
specified in dBs (base-10 logarithm). If the resulting output exceeds the maximum float amplitude of <code>1.0</code>, the whole output signal is normalized. </p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">May 1, 2024</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">January 26, 2022</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../general/" class="md-footer__link md-footer__link--prev" aria-label="Previous: General API">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                General API
              </div>
            </div>
          </a>
        
        
          
          <a href="../face-warp/" class="md-footer__link md-footer__link--next" aria-label="Next: Face Warp">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Face Warp
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2023 -- FEMTO Neuro Group
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.action.edit", "navigation.tabs", "navigation.footer"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.dd8806f2.min.js"></script>
      
        <script src="../../javascripts/katex.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/contrib/auto-render.min.js"></script>
      
    
  </body>
</html>